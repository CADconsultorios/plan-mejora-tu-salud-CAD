import React, { useState, useEffect } from 'react';
import { 
  Activity, 
  CheckCircle, 
  ArrowRight, 
  Play, 
  ShieldCheck, 
  MessageCircle,
  Video,
  FileText,
  ClipboardList,
  ChevronRight,
  AlertCircle,
  Check
} from 'lucide-react';

const App = () => {
  const [quizStep, setQuizStep] = useState(0);
  const [showQuiz, setShowQuiz] = useState(false);
  const [quizResults, setQuizResults] = useState(null);
  const [scrolled, setScrolled] = useState(false);

  // Colores personalizados basados en el logo de CAD
  const cadBlue = "#00aeef"; // Azul cian del logotipo
  const cadDark = "#1a1a1a"; // Negro/Gris muy oscuro del texto del logo

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const quizQuestions = [
    {
      question: "¿Dónde localiza principalmente su malestar o interés de mejora?",
      options: [
        { label: "Abdominal (hinchazón, pesadez, digestión)", value: "metabolic" },
        { label: "Articular/Huesos (por un golpe o caída)", value: "trauma" },
        { label: "General (cansancio, vitalidad, peso)", value: "metabolic" }
      ]
    },
    {
      question: "¿Presenta alguno de estos síntomas frecuentemente?",
      options: [
        { label: "Cansancio crónico o niebla mental", value: "metabolic" },
        { label: "Dificultad para perder peso", value: "metabolic" },
        { label: "Dolor agudo repentino por lesión", value: "trauma" },
        { label: "Ninguno de los anteriores", value: "other" }
      ]
    },
    {
      question: "¿Tiene antecedentes de hígado graso, resistencia a la insulina o hipertensión?",
      options: [
        { label: "Sí, o sospecho tenerlos", value: "metabolic" },
        { label: "No, busco atención por una emergencia", value: "trauma" }
      ]
    }
  ];

  const handleQuizAnswer = (value) => {
    if (value === "trauma") {
      setQuizResults("trauma");
    } else if (quizStep < quizQuestions.length - 1) {
      setQuizStep(quizStep + 1);
    } else {
      setQuizResults("qualified");
    }
  };

  const resetQuiz = () => {
    setQuizStep(0);
    setQuizResults(null);
    setShowQuiz(false);
  };

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-900 overflow-x-hidden">
      {/* Navegación */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white shadow-md py-3' : 'bg-transparent py-5'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center gap-2">
            <div className="p-1.5 rounded-lg" style={{ backgroundColor: cadBlue }}>
              <Activity className="text-white w-6 h-6" />
            </div>
            <span className="font-bold text-xl tracking-tight" style={{ color: cadDark }}>
              CAD <span className="font-light" style={{ color: cadBlue }}>Consultorios</span>
            </span>
          </div>
          <div className="hidden md:flex gap-8 items-center font-medium text-slate-600">
            <a href="#proceso" className="hover:text-cyan-500 transition-colors font-bold">Flujo</a>
            <a href="#beneficios" className="hover:text-cyan-500 transition-colors font-bold">Servicio</a>
            <button 
              onClick={() => setShowQuiz(true)}
              className="text-white px-6 py-2.5 rounded-full hover:opacity-90 transition-all shadow-lg font-bold"
              style={{ backgroundColor: cadBlue }}
            >
              Agendar consulta
            </button>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <section className="relative pt-32 pb-20 md:pt-44 md:pb-24 bg-white overflow-hidden">
        <div className="container mx-auto px-6 text-center">
          
          <div className="max-w-4xl mx-auto mb-10">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold mb-6 tracking-widest uppercase" style={{ backgroundColor: `${cadBlue}15`, color: cadBlue }}>
              <ShieldCheck className="w-4 h-4" />
              Programa "Mejora tu Salud"
            </div>
            <h1 className="text-3xl md:text-4xl lg:text-5xl font-black leading-tight mb-4 uppercase tracking-tight" style={{ color: cadDark }}>
              Descubre que está pasando con tu metabolismo y <span style={{ color: cadBlue }}>evita complicaciones futuras</span>
            </h1>
          </div>

          <div className="max-w-4xl mx-auto relative mb-16">
            <div className="relative rounded-[2rem] overflow-hidden shadow-2xl aspect-video bg-slate-900 group cursor-pointer border-8 border-slate-50">
              <div className="absolute inset-0 flex items-center justify-center z-20">
                <div className="w-16 h-16 md:w-20 md:h-20 text-white rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform duration-300" style={{ backgroundColor: cadBlue }}>
                  <Play className="w-8 h-8 ml-1" />
                </div>
              </div>
              <div className="absolute inset-0 bg-black/30 group-hover:bg-black/10 transition-all z-10"></div>
              <img 
                src="https://images.unsplash.com/photo-1622253692010-333f2da6031d?auto=format&fit=crop&q=80&w=1200" 
                alt="Dr. Ivan García Horna" 
                className="w-full h-full object-cover opacity-90"
              />
              <div className="absolute bottom-6 left-8 text-white z-20 text-left">
                <p className="font-bold text-lg md:text-xl">Dr. Ivan García Horna</p>
                <p className="text-white/80 text-sm">Médico Radiólogo - Explicación del Plan</p>
              </div>
            </div>
          </div>

          <div className="max-w-4xl mx-auto mb-12 text-left bg-slate-50/50 p-8 md:p-12 rounded-[2.5rem] border border-slate-100">
            <h2 className="text-2xl md:text-4xl font-black mb-8 text-center uppercase tracking-tight" style={{ color: cadDark }}>
              Este programa es para ti si...
            </h2>
            
            <div className="grid md:grid-cols-2 gap-6 max-w-3xl mx-auto">
              {[
                "Tienes malestares abdominales frecuentes y no sabes por qué.",
                "Te sientes cansad@, inflamad@ o sin energía de forma constante.",
                "Tus hábitos ya te están pasando factura y quieres corregirlos a tiempo.",
                "Has intentado hacer dietas, pero son tan extremas que no logras mantenerlas en el tiempo."
              ].map((text, i) => (
                <div key={i} className="flex gap-4 items-start">
                  <div className="mt-1 shrink-0 w-6 h-6 rounded-full flex items-center justify-center" style={{ backgroundColor: `${cadBlue}20` }}>
                    <Check className="w-4 h-4" style={{ color: cadBlue }} />
                  </div>
                  <p className="text-slate-700 font-medium leading-tight">{text}</p>
                </div>
              ))}
            </div>
          </div>

          <div className="max-w-3xl mx-auto space-y-8">
            <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
              <button 
                onClick={() => setShowQuiz(true)}
                className="w-full sm:w-auto text-white px-10 py-5 rounded-2xl font-black text-lg hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-3 group uppercase tracking-wide"
                style={{ backgroundColor: cadBlue }}
              >
                Agendar consulta <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </button>
            </div>

            <div className="flex flex-wrap justify-center gap-6 text-[10px] md:text-xs text-slate-400 font-black pt-2 uppercase tracking-[0.2em]">
              <span className="flex items-center gap-2"><CheckCircle className="w-4 h-4" style={{ color: cadBlue }} /> Consulta Virtual</span>
              <span className="flex items-center gap-2"><CheckCircle className="w-4 h-4" style={{ color: cadBlue }} /> Diagnóstico</span>
              <span className="flex items-center gap-2"><CheckCircle className="w-4 h-4" style={{ color: cadBlue }} /> Plan Personalizado</span>
            </div>
          </div>

        </div>
      </section>

      {/* Pilares Section: En qué consiste nuestro servicio */}
      <section id="beneficios" className="py-24 bg-slate-50">
        <div className="container mx-auto px-6">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <h2 className="text-3xl font-black mb-6 uppercase" style={{ color: cadDark }}>¿En qué consiste nuestro servicio?</h2>
            <div className="h-1 w-16 mx-auto mb-8" style={{ backgroundColor: cadBlue }}></div>
            <p className="text-slate-600 text-lg md:text-xl font-medium leading-relaxed">
              Obtén una guía médica especializada en medicina preventiva. Identificamos tu estado real de salud y, según tu caso, te solicitamos los exámenes correspondientes. Con esos resultados, te entregamos un diagnóstico claro y fácil de entender, junto con un plan de hábitos personalizado.
            </p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8">
            {[
              {
                icon: <Activity className="w-8 h-8" style={{ color: cadBlue }} />,
                title: "Diagnóstico de precisión",
                desc: "Analizamos tu composición interna basándonos en estudios específicos para entender tu metabolismo."
              },
              {
                icon: <ShieldCheck className="w-8 h-8" style={{ color: cadBlue }} />,
                title: "Enfoque Preventivo",
                desc: "Detectamos a tiempo lo que puede convertirse en un problema de salud y actuamos sobre lo que hoy ya necesita corrección."
              },
              {
                icon: <ClipboardList className="w-8 h-8" style={{ color: cadBlue }} />,
                title: "Guía de hábitos",
                desc: "No se trata de hacer dieta, sino de aprender a comer y a cuidar tu cuerpo de forma correcta, con hábitos sostenibles."
              }
            ].map((item, idx) => (
              <div key={idx} className="p-10 rounded-[2.5rem] bg-white border border-slate-100 shadow-sm hover:shadow-xl transition-all duration-300 group">
                <div className="mb-6 bg-slate-50 w-16 h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform">{item.icon}</div>
                <h3 className="text-xl font-black mb-4 uppercase tracking-tight" style={{ color: cadDark }}>{item.title}</h3>
                <p className="text-slate-500 leading-relaxed text-sm font-medium">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Etapas: Flujo del servicio */}
      <section id="proceso" className="py-24 bg-white">
        <div className="container mx-auto px-6">
          <div className="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
            <div className="max-w-xl text-left">
              <h2 className="text-3xl md:text-5xl font-black uppercase leading-none" style={{ color: cadDark }}>Flujo del <span style={{ color: cadBlue }}>Servicio</span></h2>
              <div className="h-2 w-20 mt-4" style={{ backgroundColor: cadBlue }}></div>
            </div>
            <div className="hidden md:block h-px flex-1 bg-slate-100 mx-10 mb-4"></div>
          </div>

          <div className="grid lg:grid-cols-3 gap-12 text-left">
            {[
              {
                stage: "01",
                title: "Abordaje Diagnóstico",
                desc: "Videollamada para escuchar tu historia clínica y definir los exámenes de laboratorio e imagen necesarios según tu caso.",
                item: "Consulta inicial de definición"
              },
              {
                stage: "02",
                title: "Entrega de Resultados",
                desc: "Interpretación de tus exámenes, te explicamos sus resultados de forma clara y definimos tu estado de salud actual.",
                item: "Interpretación experta de resultados"
              },
              {
                stage: "03",
                title: "Plan de acción",
                desc: "Entrega de tu guía personalizada con recomendaciones de alimentación, ajustes de hábitos y recursos educativos, más 5 días de seguimiento.",
                item: "Guía completa y atención"
              }
            ].map((step, idx) => (
              <div key={idx} className="relative group">
                <div className="text-8xl font-black opacity-5 absolute -top-10 -left-4 select-none group-hover:opacity-10 transition-opacity" style={{ color: cadDark }}>{step.stage}</div>
                <div className="relative z-10 pt-4">
                  <h3 className="text-2xl font-black mb-4 uppercase tracking-tight" style={{ color: cadDark }}>{step.title}</h3>
                  <p className="text-slate-600 mb-6 font-medium leading-relaxed">{step.desc}</p>
                  <div className="flex items-center gap-2 text-xs font-bold uppercase tracking-wider" style={{ color: cadBlue }}>
                    <CheckCircle className="w-4 h-4" /> {step.item}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Pricing Section */}
      <section className="py-24 bg-white">
        <div className="container mx-auto px-6">
          <div className="max-w-5xl mx-auto rounded-[3rem] p-8 md:p-16 text-white flex flex-col md:flex-row gap-12 items-center overflow-hidden relative shadow-2xl" style={{ backgroundColor: cadDark }}>
            <div className="absolute top-0 right-0 w-64 h-64 opacity-10 rounded-full translate-x-1/2 -translate-y-1/2" style={{ backgroundColor: cadBlue }}></div>
            
            <div className="md:w-3/5 relative z-10 text-left">
              <h2 className="text-3xl md:text-4xl font-black mb-8 leading-tight uppercase tracking-tight">
                Inversión única para <br/>
                <span style={{ color: cadBlue }}>entender y cuidar tu salud</span>
              </h2>
              <div className="grid sm:grid-cols-2 gap-y-4 gap-x-8 mb-8 opacity-90 font-bold text-sm">
                {[
                  "Revisión de historial",
                  "Indicación de exámenes",
                  "Sesión de Resultados",
                  "Plan de Hábitos",
                  "Recursos Educativos",
                  "Soporte por 5 días"
                ].map((item, idx) => (
                  <div key={idx} className="flex items-center gap-3">
                    <CheckCircle className="w-5 h-5 shrink-0" style={{ color: cadBlue }} /> {item}
                  </div>
                ))}
              </div>
            </div>
            
            <div className="md:w-2/5 w-full bg-white/5 backdrop-blur-sm p-10 rounded-[2rem] border border-white/10 text-center relative z-10">
              <div className="flex items-center justify-center gap-1 mb-6">
                <span className="text-2xl font-bold align-top mt-2">$</span>
                <span className="text-8xl font-black" style={{ color: 'white' }}>70</span>
              </div>
              <button 
                onClick={() => setShowQuiz(true)}
                className="w-full text-white py-5 rounded-2xl font-black text-xl hover:opacity-90 transition-all shadow-xl mb-4 uppercase tracking-widest"
                style={{ backgroundColor: cadBlue }}
              >
                Agendar consulta
              </button>
              <p className="text-white/40 text-[10px] font-bold uppercase tracking-widest italic">No se requiere pago para calificar</p>
            </div>
          </div>
          
          <div className="mt-12 text-center">
            <p className="text-slate-500 font-bold text-lg md:text-xl italic">
              "Una decisión hoy puede cambiar cómo te sentirás en los próximos años."
            </p>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-16 bg-slate-50 border-t border-slate-100">
        <div className="container mx-auto px-6 text-center">
          <div className="flex items-center justify-center gap-2 mb-8">
            <div className="p-1.5 rounded-lg" style={{ backgroundColor: cadBlue }}>
              <Activity className="text-white w-5 h-5" />
            </div>
            <span className="font-bold text-xl tracking-tight" style={{ color: cadDark }}>
              CAD <span className="font-light" style={{ color: cadBlue }}>Consultorios</span>
            </span>
          </div>
          <p className="text-slate-400 text-xs font-bold uppercase tracking-[0.3em]">Dr. Ivan García Horna • Médico Radiólogo</p>
        </div>
      </footer>

      {/* Modal del Filtro */}
      {showQuiz && (
        <div className="fixed inset-0 z-[100] flex items-center justify-center px-4">
          <div className="absolute inset-0 bg-black/80 backdrop-blur-sm" onClick={resetQuiz}></div>
          <div className="relative bg-white w-full max-w-xl rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200">
            <div className="p-8 text-white flex justify-between items-center" style={{ backgroundColor: cadDark }}>
              <div>
                <h3 className="text-xl font-black uppercase tracking-tight">Triaje Digital</h3>
                <div className="h-1 w-8 mt-1" style={{ backgroundColor: cadBlue }}></div>
              </div>
              <button onClick={resetQuiz} className="p-2 hover:bg-white/10 rounded-full transition-colors text-white font-bold">✕</button>
            </div>

            <div className="p-10">
              {!quizResults ? (
                <>
                  <div className="mb-8">
                    <div className="flex justify-between text-[10px] font-black text-slate-300 mb-2 uppercase tracking-widest">
                      <span>Pregunta {quizStep + 1} de {quizQuestions.length}</span>
                    </div>
                    <div className="w-full h-1 bg-slate-100 rounded-full">
                      <div 
                        className="h-full transition-all duration-500 rounded-full"
                        style={{ width: `${((quizStep + 1) / quizQuestions.length) * 100}%`, backgroundColor: cadBlue }}
                      ></div>
                    </div>
                  </div>

                  <h4 className="text-xl md:text-2xl font-black mb-8 leading-tight" style={{ color: cadDark }}>
                    {quizQuestions[quizStep].question}
                  </h4>
                  
                  <div className="space-y-3">
                    {quizQuestions[quizStep].options.map((opt, i) => (
                      <button 
                        key={i}
                        onClick={() => handleQuizAnswer(opt.value)}
                        className="w-full p-5 text-left border-2 border-slate-100 rounded-2xl hover:bg-slate-50 transition-all group flex justify-between items-center shadow-sm"
                      >
                        <span className="font-bold text-slate-600 group-hover:text-cyan-600">{opt.label}</span>
                        <ChevronRight className="w-5 h-5 text-slate-300 group-hover:text-cyan-500 transition-all" />
                      </button>
                    ))}
                  </div>
                </>
              ) : quizResults === "qualified" ? (
                <div className="text-center py-4">
                  <div className="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner" style={{ backgroundColor: `${cadBlue}20`, color: cadBlue }}>
                    <CheckCircle className="w-10 h-10" />
                  </div>
                  <h4 className="text-3xl font-black mb-4 uppercase" style={{ color: cadDark }}>Has calificado</h4>
                  <p className="text-slate-500 mb-10 font-medium">
                    Tu caso es ideal para nuestro enfoque metabólico. El siguiente paso es agendar tu consulta vía WhatsApp.
                  </p>
                  <div className="space-y-4">
                    <a 
                      href="https://wa.me/your-number" 
                      target="_blank" 
                      className="block w-full text-white py-5 rounded-2xl font-black text-lg hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-3"
                      style={{ backgroundColor: '#25D366' }}
                    >
                      <MessageCircle className="w-6 h-6" /> AGENDAR POR WHATSAPP
                    </a>
                  </div>
                </div>
              ) : (
                <div className="text-center py-4">
                  <div className="w-20 h-20 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mx-auto mb-8">
                    <AlertCircle className="w-10 h-10" />
                  </div>
                  <h4 className="text-2xl font-black mb-4 uppercase" style={{ color: cadDark }}>Evaluación Requerida</h4>
                  <p className="text-slate-500 mb-10 font-medium">
                    Parece que tu caso requiere una evaluación traumatológica presencial. El Plan "Mejora tu Salud" se enfoca en medicina preventiva y metabolismo.
                  </p>
                  <button onClick={resetQuiz} className="w-full py-5 rounded-2xl font-black text-lg hover:opacity-90 transition-all shadow-xl text-white" style={{ backgroundColor: cadDark }}>
                    ENTENDIDO
                  </button>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default App;